# Extraction Prompts Configuration
# Edit this file to customize extraction behavior without code changes

# System prompts for different modes
system_prompts:
  expert: "You are an expert document analyzer specialized in {document_type} extraction."
  structured: "You are a structured data extraction system. Extract information with perfect formatting."
  precise: "Extract only clearly visible information. Use NOT_FOUND for any unclear fields."
  flexible: "Extract information, making reasonable inferences for partially visible fields."
  strict: "Extract ONLY information that is completely clear and unambiguous."

# Default system prompt mode
default_system_mode: "expert"

# Conversation protocol (applies to all extractions)
conversation_protocol: |
  CONVERSATION PROTOCOL:
  - Start your response immediately with "DOCUMENT_TYPE:"
  - Do NOT include conversational text like "I'll extract..." or "Based on the document..."
  - Do NOT use bullet points, numbered lists, asterisks, or markdown formatting
  - Output ONLY the structured extraction data
  - End immediately after the last field with no additional text

# Common extraction rules
extraction_rules: |
  RULES:
  - Use exact text from document
  - CRITICAL: Use ONLY pipe separators (|) for lists - NEVER use commas
  - Be conservative: use NOT_FOUND if field is truly missing
  - For monetary values: Include currency symbol (e.g., $123.45)
  - For dates: Match format shown in document
  - For lists: Separate items with " | " (space-pipe-space)
  - Do NOT invent or hallucinate information

# Document-specific instructions
document_instructions:
  invoice: |
    This is an INVOICE document. Focus on:
    - Vendor/supplier information (name, ABN, address)
    - Customer/payer information
    - Line items with quantities and prices
    - GST and total amounts
    - Invoice date and number

  receipt: |
    This is a RECEIPT document. Focus on:
    - Merchant information
    - Transaction date and time
    - Purchased items with quantities and prices
    - Payment method and totals
    - GST if applicable

  bank_statement: |
    This is a BANK STATEMENT document. Focus on:
    - Statement date range
    - ALL individual transactions (do NOT combine multiple transactions)
    - Transaction descriptions exactly as shown
    - Transaction dates (one per transaction)
    - Amounts paid (debits/withdrawals)
    - CRITICAL: If multiple transactions occur on the same date, extract each as a SEPARATE row
    - CRITICAL: Do NOT summarize or combine transactions

# Document type detection prompt
detection_prompt: |
  Analyze this document image and identify its type.

  Respond with ONLY ONE of these document types:
  - INVOICE
  - RECEIPT
  - BANK_STATEMENT

  Start your response immediately with "DOCUMENT_TYPE: [type]"
  Do not include any explanation or additional text.

# Extraction prompt template (fields will be injected dynamically)
extraction_template: |
  Extract structured data from this business document image.

  {conversation_protocol}

  {document_instructions}

  OUTPUT FORMAT ({field_count} FIELDS):

  {field_format}

  {extraction_rules}

# Field format guidelines
field_format_guidelines:
  text: "Plain text exactly as shown"
  monetary: "Currency symbol + amount (e.g., $123.45)"
  date: "DD/MM/YYYY or DD-MMM-YY format"
  list: "Item 1 | Item 2 | Item 3 (pipe-separated)"
  boolean: "true or false (lowercase)"
  abn: "XX XXX XXX XXX (with spaces)"

# ============================================================================
# MODEL-SPECIFIC ADAPTATIONS (Phase 1)
# ============================================================================

# Model characteristics and optimization settings
model_adaptations:
  llama-3.2-vision:
    style: "step-by-step"
    instruction_format: "numbered_steps"
    verbosity: "detailed"
    reasoning_capability: "high"
    preferred_approach: "explicit_guidance"

  llama-3.2-11b-vision:
    style: "step-by-step"
    instruction_format: "numbered_steps"
    verbosity: "detailed"
    reasoning_capability: "high"
    preferred_approach: "explicit_guidance"

  llama-3.2-11b-vision-8bit:
    style: "step-by-step"
    instruction_format: "numbered_steps"
    verbosity: "detailed"
    reasoning_capability: "high"
    preferred_approach: "explicit_guidance"

  internvl3:
    style: "direct"
    instruction_format: "concise_list"
    verbosity: "minimal"
    reasoning_capability: "medium"
    preferred_approach: "direct_extraction"

  internvl3-2b:
    style: "direct"
    instruction_format: "concise_list"
    verbosity: "minimal"
    reasoning_capability: "medium"
    preferred_approach: "direct_extraction"

  internvl3-8b:
    style: "direct"
    instruction_format: "structured_list"
    verbosity: "moderate"
    reasoning_capability: "high"
    preferred_approach: "guided_extraction"

  internvl3-8b-quantized:
    style: "direct"
    instruction_format: "structured_list"
    verbosity: "moderate"
    reasoning_capability: "high"
    preferred_approach: "guided_extraction"

# Model-specific document extraction instructions
model_specific_document_instructions:
  # Llama models - verbose step-by-step approach with variants
  llama-3.2-vision:
    # Default variant - complex, detailed, step-by-step
    default:
      invoice: |
      ## STEP-BY-STEP EXTRACTION:

      ### STEP 1: Document Identification
      Look at the header - is it an INVOICE, BILL, QUOTE, or ESTIMATE?
      DOCUMENT_TYPE: [INVOICE or NOT_FOUND]

      ### STEP 2: Business Information (Usually at the top)
      Find the supplier/business details in the document header:
      BUSINESS_ABN: [Find ABN number - must be exactly 11 digits (e.g., 12 345 678 901) or NOT_FOUND]
      SUPPLIER_NAME: [Company name providing goods/services from document header or NOT_FOUND]
      BUSINESS_ADDRESS: [Complete business address (can be multi-line) or NOT_FOUND]

      ### STEP 3: Customer Information (Look for "Bill To" or "Customer" section)
      Find the customer/client details:
      PAYER_NAME: [Customer/client name or NOT_FOUND]
      PAYER_ADDRESS: [Customer/client address or NOT_FOUND]

      ### STEP 4: Date Information
      INVOICE_DATE: [Date of invoice/bill in DD/MM/YYYY format or NOT_FOUND]

      ### STEP 5: Line Items (From the itemized table/list)
      Count the number of line items and extract each one systematically:
      LINE_ITEM_DESCRIPTIONS: [Item 1 description | Item 2 description | etc. or NOT_FOUND]
      LINE_ITEM_QUANTITIES: [Qty 1 | Qty 2 | etc. (match description order) or NOT_FOUND]
      LINE_ITEM_PRICES: [$Unit price 1 | $Unit price 2 | etc. or NOT_FOUND]
      LINE_ITEM_TOTAL_PRICES: [$Total 1 | $Total 2 | etc. or NOT_FOUND]

      ### STEP 6: Tax and Totals (Usually at the bottom)
      Find the financial summary section:
      IS_GST_INCLUDED: [Look for GST/tax line - answer "true" if present, "false" if not shown]
      GST_AMOUNT: [Extract GST/tax amount with $ symbol or NOT_FOUND]
      TOTAL_AMOUNT: [Extract final total/amount due with $ symbol or NOT_FOUND]

      receipt: |
        ## STEP-BY-STEP RECEIPT EXTRACTION:

        ### STEP 1: Document Type
      DOCUMENT_TYPE: [Should be RECEIPT for payment confirmations or NOT_FOUND]

      ### STEP 2: Merchant Information (Top of receipt)
      Find the store/merchant details at the top:
      BUSINESS_ABN: [Look for ABN - exactly 11 digits (often not on receipts) or NOT_FOUND]
      SUPPLIER_NAME: [Store/restaurant/merchant name or NOT_FOUND]
      BUSINESS_ADDRESS: [Store address if shown (may be partial) or NOT_FOUND]

      ### STEP 3: Customer Information (Usually minimal or absent)
      Check if customer details are shown (rare on receipts):
      PAYER_NAME: [Customer name if shown or NOT_FOUND]
      PAYER_ADDRESS: [Customer address if shown or NOT_FOUND]

      ### STEP 4: Transaction Date
      INVOICE_DATE: [Date of purchase/transaction in DD/MM/YYYY format or NOT_FOUND]

      ### STEP 5: Items Purchased
      Look at the itemized list and extract systematically:
      LINE_ITEM_DESCRIPTIONS: [Item 1 | Item 2 | etc. or NOT_FOUND]
      LINE_ITEM_QUANTITIES: [Qty 1 | Qty 2 | etc. (use "1" if not shown) or NOT_FOUND]
      LINE_ITEM_PRICES: [$Price 1 | $Price 2 | etc. or NOT_FOUND]
      LINE_ITEM_TOTAL_PRICES: [$Total 1 | $Total 2 | etc. or NOT_FOUND]

      ### STEP 6: Payment Summary
      Find the payment totals (usually at bottom):
      IS_GST_INCLUDED: [Look for GST/tax line - "true" if shown, "false" if not]
      GST_AMOUNT: [GST/tax amount with $ symbol if shown or NOT_FOUND]
      TOTAL_AMOUNT: [Final total/amount paid with $ symbol or NOT_FOUND]

    bank_statement: |
      ## STEP-BY-STEP BANK STATEMENT EXTRACTION:

      ⚠️ CRITICAL REQUIREMENT ⚠️
      Extract ONLY DEBIT/WITHDRAWAL transactions (money OUT) for expense tracking.
      IGNORE ALL deposits and credits (money IN) - we only need expenses.

      ### STEP 1 - LOCATE TRANSACTION TABLE:
      Focus on the main transaction table (usually center/body area).
      Common column layouts:
      - 5-column: Date | Description | Withdrawal | Deposit | Balance
      - 5-column: Date | Description | Debit | Credit | Balance
      - 4-column: Date | Description | Amount | Balance (withdrawals have "-" prefix, deposits have "+" prefix)
      - 3-column: Date | Description | Amount (withdrawals negative, deposits positive)

      IMPORTANT: "Withdrawal" = "Debit" (money OUT) | "Deposit" = "Credit" (money IN)
      Ignore: Headers, footers, summary sections, advertisements

      ### STEP 2 - UNDERSTAND CREDITS vs DEBITS:

      **DEBIT/WITHDRAWAL = Money OUT (EXTRACT THESE):**
      - Shows in "Debit" or "Withdrawal" column
      - OR has negative sign: "-$100.00" or "-100.00"
      - Causes balance to DECREASE
      - Examples: Purchases, ATM withdrawals, fees, bill payments, transfers OUT
      - Common transaction types:
        * EFTPOS PURCHASE
        * ATM WITHDRAWAL
        * DIRECT DEBIT
        * ONLINE PURCHASE
        * CARD PAYMENT
        * BANK FEE
        * TRANSFER OUT
        * BILL PAYMENT

      **CREDIT/DEPOSIT = Money IN (SKIP THESE ENTIRELY):**
      - Shows in "Credit" or "Deposit" column
      - Debit column is EMPTY (blank/space) or shows "-" (dash/hyphen)
      - OR has positive sign: "+$500.00" or no sign for deposits
      - Causes balance to INCREASE
      - Examples: Salary, deposits, transfers IN, interest, refunds
      - Common transaction types to SKIP:
        * DIRECT CREDIT SALARY
        * DEPOSIT
        * TRANSFER IN
        * INTEREST PAYMENT
        * REFUND
        * CREDIT ADJUSTMENT

      **VISUAL EXAMPLES - 5 Column Statement:**

      Example A (using "Withdrawal" and "Deposit" headers, with blank spaces):
      Date       | Description           | Withdrawal | Deposit  | Balance
      01/03/2024 | GROCERIES STORE      | $45.20     |          | $2,154.80  ← EXTRACT (Withdrawal has amount)
      02/03/2024 | PAYROLL DEPOSIT      |            | $2,800.00| $4,954.80  ← SKIP (Withdrawal blank, Deposit has value)
      03/03/2024 | FUEL STATION         | $67.30     |          | $4,887.50  ← EXTRACT (Withdrawal has amount)
      04/03/2024 | TAX REFUND           |            | $156.00  | $5,043.50  ← SKIP (Withdrawal blank, Deposit has value)

      Example B (using "Debit" and "Credit" headers, with "-" dashes):
      Date       | Description           | Debit    | Credit   | Balance
      15/06/2024 | RESTAURANT           | $38.50   | -        | $1,461.50  ← EXTRACT (Debit has amount)
      16/06/2024 | WAGES PAID           | -        | $1,950.00| $3,411.50  ← SKIP (Debit dash, Credit has value)
      17/06/2024 | PHARMACY             | $24.80   | -        | $3,386.70  ← EXTRACT (Debit has amount)
      18/06/2024 | DIVIDEND INCOME      | -        | $42.30   | $3,429.00  ← SKIP (Debit dash, Credit has value)

      ⚠️ COMMON MISTAKES TO AVOID:
      ❌ DO NOT extract rows where Withdrawal/Debit column is blank
      ❌ DO NOT extract "DIRECT CREDIT SALARY" - this is a DEPOSIT (Withdrawal column blank)
      ❌ DO NOT extract "INTEREST PAYMENT" - this is a DEPOSIT (Withdrawal column blank)
      ✅ ONLY extract rows where Withdrawal/Debit column has a dollar amount

      ### STEP 3 - IDENTIFY DEBIT ROWS (Use ALL these checks):

      For EACH transaction row, verify it's a DEBIT by checking:

      ✓ CHECK 1 - Column Value & Sign:

      For 5-COLUMN statements (Date | Description | Withdrawal/Debit | Deposit/Credit | Balance):
      - Withdrawal/Debit column has AMOUNT (e.g., "$100.00", "100.00")? → WITHDRAWAL (extract)
      - Withdrawal/Debit column is EMPTY (blank/space) or has "-" dash? → DEPOSIT (skip - money IN)
      - Deposit/Credit column has AMOUNT? → DEPOSIT (skip - money IN)

      CRITICAL: If Withdrawal column is blank but Deposit column has value → SKIP THAT ROW!

      For 3-4 COLUMN statements with single amount column:
      - Amount has "-" prefix (e.g., "-$100.00")? → DEBIT (extract)
      - Amount has "+" prefix or no sign (e.g., "+$500.00")? → CREDIT (skip)
      - Negative number (e.g., -100.00)? → DEBIT (extract)
      - Positive number (e.g., +100.00, 100.00)? → CREDIT (skip)

      ✓ CHECK 2 - Balance Movement:
      - Balance DECREASED compared to previous row? → DEBIT (extract)
      - Balance INCREASED compared to previous row? → CREDIT (skip)

      ✓ CHECK 3 - Description Keywords:
      - DEBIT indicators: withdrawal, purchase, payment, ATM, EFTPOS, fee, charge, debit
      - CREDIT indicators: salary, deposit, credit, interest, transfer in, refund

      ✓ CHECK 4 - Transaction Type:
      - Expense-related (buy goods/services, withdraw cash, pay bills)? → DEBIT
      - Income-related (receive money, get paid, deposits)? → CREDIT

      ### STEP 4 - EXTRACT DEBIT ROWS ONLY:

      For EACH row that passes ALL debit checks above:
      1. Extract DATE (DD/MM/YYYY format)
      2. Extract DESCRIPTION (exact text from description column)
      3. Extract AMOUNT (with $ symbol, from debit/withdrawal column)
      4. Add to output lists with " | " separator

      ⚠️ DOUBLE-CHECK: Count your extracted transactions
      - Only DEBIT/WITHDRAWAL transactions should be in your output
      - Verify each transaction caused balance to DECREASE
      - Verify NO salary/deposit/credit transactions are included

      OUTPUT FORMAT:
      DOCUMENT_TYPE: BANK_STATEMENT
      STATEMENT_DATE_RANGE: [earliest transaction date to latest transaction date]
      LINE_ITEM_DESCRIPTIONS: [debit_description1 | debit_description2 | etc.]
      TRANSACTION_DATES: [DD/MM/YYYY | DD/MM/YYYY | etc.]
      TRANSACTION_AMOUNTS_PAID: [$amount1 | $amount2 | etc.]

  # Llama-3.2-Vision MINIMAL - ultra-simple direct approach
  llama-3.2-vision-minimal:
    invoice: |
      Extract invoice data. Start immediately with field values.

      DOCUMENT_TYPE: INVOICE
      BUSINESS_ABN: [11-digit ABN or NOT_FOUND]
      SUPPLIER_NAME: [Business name or NOT_FOUND]
      BUSINESS_ADDRESS: [Business address or NOT_FOUND]
      PAYER_NAME: [Customer name or NOT_FOUND]
      PAYER_ADDRESS: [Customer address or NOT_FOUND]
      INVOICE_DATE: [DD/MM/YYYY or NOT_FOUND]
      LINE_ITEM_DESCRIPTIONS: [Item 1 | Item 2 | etc. or NOT_FOUND]
      LINE_ITEM_QUANTITIES: [Qty 1 | Qty 2 | etc. or NOT_FOUND]
      LINE_ITEM_PRICES: [$price 1 | $price 2 | etc. or NOT_FOUND]
      LINE_ITEM_TOTAL_PRICES: [$total 1 | $total 2 | etc. or NOT_FOUND]
      IS_GST_INCLUDED: [true or false or NOT_FOUND]
      GST_AMOUNT: [$amount or NOT_FOUND]
      TOTAL_AMOUNT: [$amount or NOT_FOUND]

    receipt: |
      Extract receipt data. Start immediately with field values.

      DOCUMENT_TYPE: RECEIPT
      BUSINESS_ABN: [11-digit ABN or NOT_FOUND]
      SUPPLIER_NAME: [Store name or NOT_FOUND]
      BUSINESS_ADDRESS: [Store address or NOT_FOUND]
      PAYER_NAME: [Customer name or NOT_FOUND]
      PAYER_ADDRESS: [Customer address or NOT_FOUND]
      INVOICE_DATE: [DD/MM/YYYY or NOT_FOUND]
      LINE_ITEM_DESCRIPTIONS: [Item 1 | Item 2 | etc. or NOT_FOUND]
      LINE_ITEM_QUANTITIES: [Qty 1 | Qty 2 | etc. or NOT_FOUND]
      LINE_ITEM_PRICES: [$price 1 | $price 2 | etc. or NOT_FOUND]
      LINE_ITEM_TOTAL_PRICES: [$total 1 | $total 2 | etc. or NOT_FOUND]
      IS_GST_INCLUDED: [true or false or NOT_FOUND]
      GST_AMOUNT: [$amount or NOT_FOUND]
      TOTAL_AMOUNT: [$amount or NOT_FOUND]

    bank_statement: |
      Look at the bank statement transaction table.

      ⚠️ ONE CRITICAL RULE: Only extract rows where the Withdrawal column has a dollar amount.

      The table has columns like:
      Date | Description | Withdrawal | Deposit | Balance

      EXTRACTION RULE:
      • Withdrawal column has amount (e.g., $100.00)? → EXTRACT this row
      • Withdrawal column is blank/empty? → SKIP this row completely

      DO NOT EXTRACT:
      ✗ Rows where Withdrawal is blank (even if Deposit has value)
      ✗ DIRECT CREDIT SALARY (Withdrawal blank)
      ✗ INTEREST PAYMENT (Withdrawal blank)
      ✗ PAYROLL DEPOSIT (Withdrawal blank)
      ✗ Any row with blank Withdrawal column

      EXTRACT ONLY:
      ✓ Rows with dollar amount in Withdrawal column
      ✓ EFTPOS PURCHASE (has Withdrawal amount)
      ✓ ATM WITHDRAWAL (has Withdrawal amount)
      ✓ ONLINE PURCHASE (has Withdrawal amount)

      VISUAL CHECK:
      Date       | Description          | Withdrawal | Deposit | Balance
      03/05/2025 | EFTPOS PURCHASE     | $22.50     |         | $1,477.50  ← EXTRACT (has Withdrawal)
      04/05/2025 | DIRECT CREDIT SALARY|            | $3,500  | $4,977.50  ← SKIP (Withdrawal blank)
      05/05/2025 | ATM WITHDRAWAL      | $100.00    |         | $4,877.50  ← EXTRACT (has Withdrawal)

      For each row with Withdrawal amount, extract:
      - Transaction date (DD/MM/YYYY)
      - Description text
      - Withdrawal amount (with $)

      OUTPUT FORMAT:
      DOCUMENT_TYPE: BANK_STATEMENT
      STATEMENT_DATE_RANGE: [earliest date to latest date]
      LINE_ITEM_DESCRIPTIONS: [desc1 | desc2 | desc3]
      TRANSACTION_DATES: [DD/MM/YYYY | DD/MM/YYYY | DD/MM/YYYY]
      TRANSACTION_AMOUNTS_PAID: [$amt1 | $amt2 | $amt3]

  # InternVL3 models - concise direct approach
  internvl3:
    invoice: |
      Extract ALL data from this invoice image. Respond in exact format below with actual values or NOT_FOUND.

      DOCUMENT_TYPE: INVOICE
      BUSINESS_ABN: NOT_FOUND
      SUPPLIER_NAME: NOT_FOUND
      BUSINESS_ADDRESS: NOT_FOUND
      PAYER_NAME: NOT_FOUND
      PAYER_ADDRESS: NOT_FOUND
      INVOICE_DATE: NOT_FOUND
      LINE_ITEM_DESCRIPTIONS: NOT_FOUND
      LINE_ITEM_QUANTITIES: NOT_FOUND
      LINE_ITEM_PRICES: NOT_FOUND
      LINE_ITEM_TOTAL_PRICES: NOT_FOUND
      IS_GST_INCLUDED: NOT_FOUND
      GST_AMOUNT: NOT_FOUND
      TOTAL_AMOUNT: NOT_FOUND

      Instructions:
      - Find ABN: 11 digits like "12 345 678 901"
      - Find supplier: Business name at top
      - Find customer: "Bill To" section
      - Find date: Use DD/MM/YYYY format
      - Find line items: List with " | " separator
      - Find amounts: Include $ symbol
      - Replace NOT_FOUND with actual values

    receipt: |
      Extract ALL data from this receipt image. Respond in exact format below with actual values or NOT_FOUND.

      DOCUMENT_TYPE: RECEIPT
      BUSINESS_ABN: NOT_FOUND
      SUPPLIER_NAME: NOT_FOUND
      BUSINESS_ADDRESS: NOT_FOUND
      PAYER_NAME: NOT_FOUND
      PAYER_ADDRESS: NOT_FOUND
      INVOICE_DATE: NOT_FOUND
      LINE_ITEM_DESCRIPTIONS: NOT_FOUND
      LINE_ITEM_QUANTITIES: NOT_FOUND
      LINE_ITEM_PRICES: NOT_FOUND
      LINE_ITEM_TOTAL_PRICES: NOT_FOUND
      IS_GST_INCLUDED: NOT_FOUND
      GST_AMOUNT: NOT_FOUND
      TOTAL_AMOUNT: NOT_FOUND

      Instructions:
      - Find ABN: 11 digits like "12 345 678 901"
      - Find store: Business name at top
      - Find transaction date: Use DD/MM/YYYY format
      - Find purchased items: List with " | " separator
      - Find amounts: Include $ symbol
      - Replace NOT_FOUND with actual values

    bank_statement: |
      Extract structured data from this bank statement for taxpayer expense claims.

      ⚠️ CRITICAL: Extract ONLY DEBIT/WITHDRAWAL transactions (money OUT).
      IGNORE ALL deposits and credits (money IN).

      Column headers may be "Withdrawal/Deposit" OR "Debit/Credit" - they mean the same thing!

      WITHDRAWAL/DEBIT (Extract - money OUT):
      - Has amount in "Withdrawal" or "Debit" column
      - OR has negative sign: "-$100.00" or "-100.00"
      - Balance DECREASES
      - Examples: ATM withdrawal, EFTPOS purchase, online payment, fees
      - Keywords: withdrawal, purchase, payment, ATM, EFTPOS, fee

      DEPOSIT/CREDIT (Skip - money IN):
      - Has amount in "Deposit" or "Credit" column
      - Withdrawal/Debit column is BLANK
      - OR has positive sign: "+$500.00" or no sign
      - Balance INCREASES
      - Examples: Salary, deposits, interest
      - Keywords: salary, deposit, credit, interest, transfer in, refund

      Identify withdrawals by:
      1. For 5-column: Withdrawal/Debit column has AMOUNT (not blank, not "-")
      2. For 3-4 column: Amount has "-" prefix/negative number
      3. Balance DECREASED from previous row
      4. Description keywords (purchase, withdrawal, ATM, EFTPOS, payment, fee)

      ⚠️ CRITICAL RULES:
      - If Withdrawal/Debit column is BLANK but Deposit/Credit column has value → SKIP!
      - Do NOT extract "DIRECT CREDIT SALARY" - Withdrawal column is blank
      - Do NOT extract "INTEREST PAYMENT" - Withdrawal column is blank
      - ONLY extract rows where Withdrawal/Debit column has a dollar amount

      Output format (5 FIELDS):

      DOCUMENT_TYPE: BANK_STATEMENT
      STATEMENT_DATE_RANGE: NOT_FOUND
      LINE_ITEM_DESCRIPTIONS: NOT_FOUND
      TRANSACTION_DATES: NOT_FOUND
      TRANSACTION_AMOUNTS_PAID: NOT_FOUND

      Instructions:
      - Statement period: Earliest to latest transaction date (DD/MM/YYYY to DD/MM/YYYY)
      - Transaction descriptions: DEBIT descriptions only, " | " separator
      - Transaction dates: DEBIT dates only, DD/MM/YYYY, " | " separator
      - Amounts paid: Debit amounts with $, " | " separator (money OUT only)
      - VERIFY: No salary/deposit/credit transactions in output
      - Use NOT_FOUND for missing fields

# Use model-specific instructions when appropriate (set by model_name parameter)
use_model_specific_instructions: true

# ============================================================================
# BANK STATEMENT STRUCTURE-SPECIFIC PROMPTS (Phase 2)
# ============================================================================

# Structure-specific extraction prompts based on classified layout
bank_statement_structure_prompts:
  TABLE_3COL_SIMPLE:
    extraction_focus: |
      This bank statement has 3 columns: Date | Description | Amount
      - Extract from single amount column (includes both debits and credits)
      - Identify debits by negative signs or withdrawal indicators

  TABLE_4COL_STANDARD:
    extraction_focus: |
      This bank statement has 4 columns: Date | Description | Debit | Credit
      - Extract ONLY from Debit column (column 3)
      - Skip Credit column entries
      - Debit column is BEFORE Credit column

  TABLE_4COL_REVERSED:
    extraction_focus: |
      This bank statement has REVERSED columns: Date | Description | Credit | Debit
      - CRITICAL: Credit column comes BEFORE Debit column
      - Extract from Debit column (column 4, rightmost before balance)

  TABLE_5COL_STANDARD:
    extraction_focus: |
      This bank statement has 5 columns: Date | Transaction | Debit | Credit | Balance
      - Extract from Debit column (column 3)
      - Use Balance column for validation
      - Running balance helps identify transaction order

  TABLE_5COL_DETAILED:
    extraction_focus: |
      This bank statement has 5 columns with multi-row transactions
      - "Particulars" column may have multiple detail lines
      - Combine multi-line descriptions for same transaction
      - Extract main transaction row debits

  MOBILE_APP_DARK:
    extraction_focus: |
      This is a mobile banking app with dark theme
      - No column headers
      - Transactions grouped under day names (Wed, Thu, etc.)
      - Extract from card-based layout

  MOBILE_APP_LIGHT_INLINE:
    extraction_focus: |
      This is a mobile banking app with inline balance
      - Look for "bal $XXX.XX" text pattern
      - Category labels below descriptions
      - Merchant logos may be present

# Hot reload support
version: "2.0.0"
last_updated: "2025-11-19"
